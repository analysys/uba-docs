# 消息通知

消息通知是运营人员对APP用户主动推送的消息，出现在设备锁定屏幕、通知中心、横幅中，用户点击后可以唤醒APP或者进入到相应页面，达到促活、增加使用粘性的运营目的。

![ ](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901171426191163.jpeg)

常见的消息通知有：

* **功能类的通知消息**：基于用户在APP上的行为触发推送，例如下单通知、收到红包、被评论、被关注等；
* **内容类的资讯消息**：基于用户的浏览、收藏、关注等行为进行个性化的内容推荐，例如今日头条推送新闻、爱奇艺推送视频等；
*   **营销类的活动消息**：基于节假日、用户场景等进行的促销、福利等，例如天猫双十一活动、进入某个商圈的优惠券等等

    ……

无论是哪种类型的通知，只有进行精细化的推送，即在合适的时候给合适的人群推送合适的内容，才能在不打扰用户、给用户带来价值的同时，有效延伸产品价值。

易观方舟支持分析、分群、触达、分析效果一站式的工具，提升精细化推送的效率和效果。

## 使用前准备

消息通知目前适用于 Android 和 iOS 应用，需要准备如下：

### 1. 在推送平台注册帐号，并集成相应 SDK

若您之前已经在使用相关推送平台，则跳过该步骤；

### 2. 集成方舟 SDK

集成后在 App 初始化过程中获取设备推送 ID，并保存在方舟分析的用户信息中

具体方法详见：

* Android应用：《Android SDK 使用说明》中 [_5 消息推送_](../../integration/sdk/android/#xiao-xi-tui-song-sdk-jie-kou)  部分
* iOS应用：《iOS SDK 使用说明》中 [_5 消息推送_](../../integration/sdk/ios/#xiao-xi-tui-song-sdk-jie-kou-jie-shao)  部分

### 3. 在方舟中选择消息通知服务商进行服务集成配置

{% content-ref url="../project-manegement/integrations.md" %}
[integrations.md](../project-manegement/integrations.md)
{% endcontent-ref %}

## 功能说明

移入导航 **运营** 模块，选择进入 **消息通知** 页面

![ ](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901171548258977.jpg)

点击右上角 **立即创建**，进入创建页面

### 1. 创建推送消息

![ ](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901171559090334.jpg)

**A. 消息名称**

用户自定义， 用于标识推送活动，e.g. 618 老用户促销通知，支持根据消息名称查看的推送效果转化

**B. 目标用户**

支持从下拉框中选择已圈定好的目标分群

![ ](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901171607599092.jpg)

对于选定的分群支持显示各个平台对应用户数，因为易观方舟一个项目支持接入多个平台的数据，但消息通知仅支持移动端，所以若圈定的目标分群中包括Android、iOS之外的用户，在推送时将进行过滤

![ ](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901171609395878.jpg)

**C. 推送内容**

在 C 区域中输入通知的标题和内容，可以在右侧实时预览效果

支持插入用户属性推送个性化的消息（用户属性需要通过 SDK 上报，详见《[SDK指南](../../integration/sdk/)》）

![ ](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901171704504972.png)

e.g. 发送消息通知：

> 亲爱的 ${user_name}，你的蚂蚁花呗会自动还款了，点击查看怎么回事……

如果小明的用户名是xiaoxiaoming，则收到如下通知：

> 亲爱的 xiaoxiaoming，你的蚂蚁花呗会自动还款了，点击查看怎么回事……

![ ](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901171616258152.jpg)

**D. 推送设置**

设置三项内容：

1. 用户点击通知后的行为  
2. 推送通道  
3. 推送时间 

**D1. 用户点击通知后的行为**

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808101744187304.png)

* **应用**，用户点击消息后直接打开应用
* **应用内页面**，用户点击消息后跳转到应用内页面，要填写完整包名和 activity 名字。e.g.com.fangzhou.MainActivity
* **URL**，要填写以 http 或 https 开头的 URL。e.g.[https://ark.analysys.cn](https://ark.analysys.cn)

{% hint style="info" %}
设置点击后应用内页面时，需要的开发做好集成准备，详见 

[《Android SDK 集成指南 - 消息推送 SDK 接口》](https://docs.analysys.cn/ark/integration/sdk/sdk-android#xiao-xi-tui-song-sdk-jie-kou)

[《iOS SDK 集成指南 - 消息推送 SDK 接口》](https://docs.analysys.cn/ark/integration/sdk/sdk-ios#xiao-xi-tui-song-sdk-jie-kou-jie-shao)

使用时注意：

1. 若打开的是 H5 页面，直接填写页面 URL 即可
2. 若打开的是原生页面，需填写完整包名和 activity 名字（运营同学可以联系内部开发获取）
{% endhint %}

**D2. 推送通道**

目前方舟预置了五个推送通道：极光推送、个推、百度推送、小米推送、华为推送，如有需要可以自定义或者联系我们增加

在使用之前，需要先通过服务配置（如何配置请阅读[《服务集成配置》](https://docs.analysys.cn/ark/features/project-manegement/integrations)），只有配置好相应通道，才可以使用

![](<../../.gitbook/assets/image (266).png>)

{% hint style="warning" %}
极光推送 iOS 推送官网要求选择生产环境还是开发环境，且只有当相应的环境在极光中完成 APNS 证书文件的验证时才可推送成功

程序员哥哥们务必注意在极光推送设置中完成生产环境和测试环境 APNS 证书文件的验证（如果你是产品/运营，请提醒他们）

在实际推送时，方舟默认会选择推送至生产环境，也支持切换至开发环境，用于联调阶段测试。
{% endhint %}

**D3. 推送时间**

![](<../../.gitbook/assets/image (267).png>)

有立即推送、定时推送和周期性推送三种

* **立即推送**，确认发送即时生效
* **定时推送**，可设定日期、时间准时发送
* **周期性推送**，以日/周/月的周期重复发送，可以设置开始和结束时间

**E. 目标设置**

可设置转化目标和转化周期

* **转化目标**，设置一个行为，衡量推送消息的结果
* **转化周期**，以天为周期

**F. 草稿、发送**

编辑好的内容点击确认推送，即可开始的推送；也可以存为草稿。

![](<../../.gitbook/assets/image (268).png>)

### 2. 消息通知列表

所有已创建的消息会显示在列表中

![ ](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901171805297050.png)

列表当中会包含以下状态的消息： 

![](<../../.gitbook/assets/image (269).png>)

* **待推送**：设置了定时或者周期性推送消息，且没有到达相应时间是，消息为待推送状态
* **推送中**：正在推送当中的消息
* **推送成功**：推送完成的消息
* **推送失败**：因为通道错误、接口错误等导致的推送失败
* **停止推送**：对于定时或者周期性消息，在推送前点击停止推送的消息
* **草稿**：还没有确认推送的草稿

支持操作包括：

A. 通过关键字快速搜索

B. 通过时间段过滤

C. 编辑草稿消息

D. 删除消息

E. 另存为

F. 停止推送（仅支持停止未开始推送的定时或者周期性消息）

G. 查看发送效果

### 3. 效果分析

每一次消息通知可以查看推送效果，包括指标：

* 目标用户：指圈定的用户数量
* 发送用户：指实际发送成功的用户数（仅Android、iOS用户可发送）
* 到达用户：指实际到达的用户（触发了 $push_receiver_success 事件）
* 点击用户：指点击消息通知的用户（触发了 $push_click 事件）
* 转化用户：指通过消息通知进入之后触发了指定事件的用户

![ ](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901171836032749.jpg)

也支持在不同的分析模型中，分析其转化或者留存效果

![ ](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901171841197698.png)

## 常见问题

### **Q1. 易观方舟负责推送吗？到达率在什么水平？**

易观方舟关注的是如何将第三方的推送服务和方舟的分析结合，使得分析得以通过触达落地，从中起到的是连接作用。您可以在方舟中创建推送的内容，但是推送消息本身通过第三方的推送平台来实现，到达率也取决于各个推送平台。

### **Q2. 是否还需要单独购买第三方服务？**

取决于第三方推送平台是否收费。若其免费，则需在第三方推送服务平台上注册账号、添加应用，获取相应的AppKey等，集成推送SDK，并在方舟的 **管理-推送配置** 中完成绑定。

### **Q3. 支持同时使用多家推送服务？**

目前支持多家服务融合使用。

### **Q4. 可以接入自建的推送平台吗？怎么操作？**

支持，需要双方沟通开发中间件。

### **Q5. 正在使用的推送服务没有出现在支持列表中，怎么办？**

请致电 **4006-010-231** 与我们联系。

### **Q6. 方舟是如何实现消息通知效果监测的？**

我们会在透传的消息中自动添加如下UTM参数：

* utm_campaign = 创建时添加的消息名称
* utm_medium = 消息通知
* utm_source = 个推、极光等推送通道名称
* utm_content = 消息标题 
* utm_term = 空

这样用户在用户收到通知、点击通知、点击通知后进入APP这些事件上报时，就会带上相应的参数。

### **Q7. 方舟的推送分析和极光等推送平台的的统计功能有何不同？**

推送平台擅长的是消息推送的技术本身，方舟擅长的是用户精细化运营，包括行为分析-细分用户群-第三方数据补充支持决策-运营触达到再次回到分析，触达的手段也不局限于推送消息本身，所以二者有本质的差异。



{% hint style="info" %}
以上内容没有解答我的问题？[点击我来反馈](https://support.qq.com/products/118522/) 🚀
{% endhint %}
